#!/usr/bin/python
from proc_yields import ProcYields
from disp_yields import DispYields
import sys,time

"""
py [obsdate] [dtyp] [simnum=siml] [tops=tops] [usehel=False] [dbg=False] [q2min=1.25] [q2min=1.75] [expt=e1f]
"""
if len(sys.argv)<3:
	sys.exit("Not all parameters entered. obsdate and dtyp are required")

obsdate=sys.argv[1]
dtyp=sys.argv[2]

if len(sys.argv)>3:#i.e. simnum entered by user
	simnum=sys.argv[3]
else:
	simnum='siml'

if len(sys.argv)>4:#i.e. tops by user
	tops=[]
        if len(sys.argv[4].split(":"))>0:
		for top in map(int,sys.argv[4].split(":")):
			if top!=1 and top!=2 and top!=3 and top!=4:
				sys.exit("valid tops are 1,2,3 and 4 only!")
			tops.append(top)
	else:
		sys.exit("Please enter tops as 1:2:3:4")
else:
        tops=[1,2,3,4]

if len(sys.argv)>5:#i.e. usehel entered by user
        if   sys.argv[5]=='True':  usehel=True
	elif sys.argv[5]=='False': usehel=False
        else: sys.exit("usehel=\'%s\' not valid. Exiting."%sys.argv[5])
	
else:
        usehel=False

if len(sys.argv)>6:#i.e. dbg entered by user
	if   sys.argv[6]=='True':  dbg=True
        elif sys.argv[6]=='False': dbg=False
        else: sys.exit("dbg=\'%s\' not valid. Exiting"%sys.argv[6])
else:
        dbg=False

if len(sys.argv)>7:#i.e. q2min entered by user
	q2min=float(sys.argv[7])
else:
        q2min=1.25

if len(sys.argv)>8:#i.e. q2max entered by user
        q2max=float(sys.argv[8])
else:
        expt=1.75

if len(sys.argv)>9:#i.e. expt entered by user
        expt=sys.argv[9]
else:
        expt='e1f'

print "py: Going to process yields for (obsdate dtyp simmnum tops usehel dbg q2min q2max expt)=(", obsdate, dtyp,simnum,tops,usehel,dbg,q2min,q2max,expt,")"
time.sleep(3)
py=ProcYields(obsdate,dtyp,simnum=simnum,tops=tops,usehel=usehel,dbg=dbg,q2min=q2min,q2max=q2max,expt=expt)#,wmin=1.725)
py.execute()
